<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gracie Abrams - Official</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="header">
      <button class="theme-toggle" id="theme-toggle">
        <span class="theme-text">Toggle Theme</span>
      </button>
      <h1>GRACIE ABRAMS</h1>
      <p>The Art of Vulnerability</p>
    </div>

    <div class="parallax-bg">
      <div>GOOD RIDDANCE</div>
    </div>

    <div class="content">
      <h2>Latest Album</h2>
      <p>
        'Good Riddance', produced by Aaron Dessner, marks Gracie's evolution as
        an artist. The album delves deep into personal growth, heartbreak, and
        self-discovery.
      </p>

      <div class="comparison">
        <h3>Discography</h3>
        <ul>
          <li><strong>Good Riddance (2023)</strong> - "Where do we go now?"</li>
          <li>
            <strong>This Is What It Feels Like (2021)</strong> - "Feels Like"
          </li>
          <li><strong>Minor (2020)</strong> - "21"</li>
        </ul>
      </div>

      <div class="reflection">
        <strong>Latest Release:</strong>
        "I know it's not what you want to hear, but I've got to be honest..."
      </div>
    </div>

    <div class="normal-bg">
      <div>TOUR 2023</div>
    </div>

    <div class="content">
      <h2>Live Performances</h2>
      <p>
        Known for her intimate live shows, Gracie creates an atmosphere where
        vulnerability meets raw talent. Each performance feels like a personal
        conversation with the audience.
      </p>

      <div class="comparison">
        <h3>Performance Style</h3>
        <ul>
          <li><strong>Intimate Venues</strong> - Close connection with fans</li>
          <li><strong>Acoustic Elements</strong> - Raw, authentic sound</li>
          <li><strong>Personal Stories</strong> - Between-song narratives</li>
        </ul>
      </div>
    </div>

    <div class="parallax-js-section" id="js-parallax">
      <div class="parallax-layer layer-back" data-speed="0.2">GRACIE</div>
      <div class="parallax-layer layer-middle" data-speed="0.5">ABRAMS</div>
      <div class="parallax-layer layer-front" data-speed="0.8">2023</div>
    </div>

    <div class="content">
      <h2>About Gracie</h2>
      <p>
        Los Angeles native Gracie Abrams has established herself as one of the
        most compelling songwriters of her generation. Her confessional lyrics
        and melodic sensitivity create an intimate portrait of modern
        relationships.
      </p>

      <div class="reflection">
        <strong>Artist Statement:</strong>
        "Writing songs is how I process everything. It's how I hope to connect
        with others who might be feeling the same way."
      </div>
    </div>

    <!-- Image-based Parallax Layers -->
    <div class="parallax-image-section" id="image-parallax">
      <div class="image-layer image-layer-1" data-speed="0.3"></div>
      <div class="image-layer image-layer-2" data-speed="0.6"></div>
      <div class="image-layer image-layer-3" data-speed="0.9"></div>
      <div class="speed-indicator">GRACIE ABRAMS â€¢ GOOD RIDDANCE â€¢ 2023</div>
    </div>

    <div class="content">
      <h2>Songwriting Process</h2>
      <p>
        Gracie's songwriting process combines raw emotional honesty with
        delicate melodic layers, creating an immersive experience that connects
        deeply with her audience.
      </p>

      <div class="comparison">
        <h3>Musical Elements</h3>
        <table style="width: 100%; border-collapse: collapse; margin-top: 1rem">
          <tbody>
            <tr style="background: var(--bg-color); font-weight: bold">
              <td
                style="padding: 0.75rem; border: 1px solid var(--accent-color)"
              >
                Element
              </td>
              <td
                style="padding: 0.75rem; border: 1px solid var(--accent-color)"
              >
                Description
              </td>
              <td
                style="padding: 0.75rem; border: 1px solid var(--accent-color)"
              >
                Notable Songs
              </td>
            </tr>
            <tr>
              <td
                style="padding: 0.75rem; border: 1px solid var(--accent-color)"
              >
                <strong>Vocals</strong>
              </td>
              <td
                style="padding: 0.75rem; border: 1px solid var(--accent-color)"
              >
                Intimate, whisper-like delivery
              </td>
              <td
                style="padding: 0.75rem; border: 1px solid var(--accent-color)"
              >
                "I miss you, I'm sorry"
              </td>
            </tr>
            <tr>
              <td
                style="padding: 0.75rem; border: 1px solid var(--accent-color)"
              >
                <strong>Production</strong>
              </td>
              <td
                style="padding: 0.75rem; border: 1px solid var(--accent-color)"
              >
                Minimalist, atmospheric
              </td>
              <td
                style="padding: 0.75rem; border: 1px solid var(--accent-color)"
              >
                "Block me out"
              </td>
            </tr>
            <tr>
              <td
                style="padding: 0.75rem; border: 1px solid var(--accent-color)"
              >
                <strong>Lyrics</strong>
              </td>
              <td
                style="padding: 0.75rem; border: 1px solid var(--accent-color)"
              >
                Deeply personal, diaristic
              </td>
              <td
                style="padding: 0.75rem; border: 1px solid var(--accent-color)"
              >
                "21"
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="reflection">
        <strong>Artist's Vision:</strong>
        "Every song is a chapter of my life, written in real-time as I process
        my experiences. Working with Aaron Dessner on 'Good Riddance' helped me
        find new ways to tell these stories."
      </div>
    </div>

    <script>
      // Theme toggle functionality
      const themeToggle = document.getElementById("theme-toggle");
      const themeText = themeToggle.querySelector(".theme-text");

      // Simple theme toggle function
      function toggleTheme() {
        const isDark = document.documentElement.classList.toggle("dark-mode");
        themeText.textContent = isDark ? "Light Mode" : "Dark Mode";
        localStorage.setItem("theme", isDark ? "dark" : "light");
      }

      // Set initial theme from localStorage
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme === "dark") {
        document.documentElement.classList.add("dark-mode");
        themeText.textContent = "Light Mode";
      } else {
        themeText.textContent = "Dark Mode";
      }

      // Add click event listener
      themeToggle.addEventListener("click", toggleTheme);

      // Check for reduced motion preference
      const prefersReducedMotion = window.matchMedia(
        "(prefers-reduced-motion: reduce)"
      );
      let isReducedMotion = prefersReducedMotion.matches;

      // Handle CSS-based parallax
      function handleMotionPreference() {
        const parallaxElements = document.querySelectorAll(".parallax-bg");

        if (isReducedMotion) {
          // User prefers reduced motion - disable parallax
          parallaxElements.forEach((el) => {
            el.style.backgroundAttachment = "scroll";
          });
          console.log("Parallax disabled: user prefers reduced motion");
        }
      }

      // JavaScript-based Parallax Implementation
      function initParallax() {
        if (isReducedMotion) {
          console.log(
            "JS Parallax disabled: respecting reduced motion preference"
          );
          return;
        }

        const parallaxLayers = document.querySelectorAll(
          ".parallax-layer, .image-layer"
        );
        let ticking = false;

        function updateParallax() {
          parallaxLayers.forEach((layer) => {
            const speed = parseFloat(layer.dataset.speed) || 0.5;
            const section = layer.parentElement;
            const rect = section.getBoundingClientRect();

            // Only animate when section is in viewport
            if (rect.top < window.innerHeight && rect.bottom > 0) {
              // Calculate scroll position relative to section's position
              const sectionTop = section.offsetTop;
              const scrolled = window.pageYOffset;
              const offset = scrolled - sectionTop;
              const yPos = offset * speed * 0.5; // Multiply by 0.5 to reduce movement

              // Use transform for better performance
              layer.style.transform = `translateY(${yPos}px)`;
            }
          });

          ticking = false;
        }

        function requestTick() {
          if (!ticking) {
            requestAnimationFrame(updateParallax);
            ticking = true;
          }
        }

        // Throttle scroll events using requestAnimationFrame
        window.addEventListener("scroll", requestTick, { passive: true });

        // Initial update
        updateParallax();
      }

      // Initialize everything
      handleMotionPreference();
      initParallax();

      // Listen for motion preference changes
      prefersReducedMotion.addEventListener("change", (e) => {
        isReducedMotion = e.matches;
        handleMotionPreference();

        if (isReducedMotion) {
          // Reset all transforms
          document
            .querySelectorAll(".parallax-layer, .image-layer")
            .forEach((layer) => {
              layer.style.transform = "translateY(0)";
            });
        } else {
          initParallax();
        }
      });

      // Log performance info for learning
      console.log("ðŸŽ¬ Parallax Demo Loaded");
      console.log(
        "ðŸ“Š Layers detected:",
        document.querySelectorAll(".parallax-layer, .image-layer").length
      );
      console.log(
        "â™¿ Reduced motion:",
        isReducedMotion ? "ENABLED" : "DISABLED"
      );
    </script>
  </body>
</html>
